generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model CatsActionLog {
  id                    Int      @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName     String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model CatsClickLog {
  id                    Int      @id @default(autoincrement())
  clickDateTime         DateTime?
  affiliateLinkName     String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model FinebirdActionLog {
  id                    Int      @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName     String?
  referrerUrl           String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model FinebirdClickLog {
  id                    Int      @id @default(autoincrement())
  affiliateLinkName     String?     
  clickData             Int?       
  createdAt             DateTime?
  updatedAt             DateTime?
}

model HanikamuActionLog {
  id                    Int       @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName     String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model HanikamuClickLog {
  id                    Int       @id @default(autoincrement())
  affiliateLinkName     String?
  clickData             Int?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model MetronActionLog {
  id Int @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName     String?
  referrerUrl           String?
  sessionId             String?
  uid                   String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model MetronClickLog {
  id                    Int       @id @default(autoincrement())
  clickDateTime         DateTime?
  affiliateLinkName     String?
  referrerUrl           String?
  sessionId             String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model MonkeyActionLog {
  id                　  Int       @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName　   String?
  referrerUrl       　  String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model MonkeyClickLog {
  id                   Int       @id @default(autoincrement())
  affiliateLinkName    String?
  clickData            Int?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model RentracksActionLog {
  id                   Int       @id @default(autoincrement())
  actionDateTime       DateTime?
  affiliateLinkName    String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model RentracksClickLog {
  id                   Int      @id @default(autoincrement())
  affiliateLinkName    String?
  clickData            Int?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model SampleAffiliateActionLog {
  id                   Int      @id @default(autoincrement())
  affiliateLinkName    String?
  actionDateTime       DateTime?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model SampleAffiliateClickLog {
  id                   Int      @id @default(autoincrement())
  affiliateLinkName    String?
  clickData            Int?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model ladActionLog {
  id                   Int       @id @default(autoincrement())
  actionDateTime       DateTime?
  affiliateLinkName    String?
  referrerUrl          String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model ladClickLog {
  id                   Int      @id @default(autoincrement())
  clickDateTime        DateTime?
  affiliateLinkName    String?
  referrerUrl          String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model WebantennaActionLog {
  id                   Int       @id @default(autoincrement())
  utmSourceIdentifier  String?
  creativeName         String?
  cvDate               DateTime?
  cvIdentifierId       String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

enum AspType {
  METRON
  CATS
  LAD
  MONKEY
  FINEBIRD
  HANIKAMU
  RENTRACKS
  SAMPLE_AFFILIATE
}

model AspActionLog {
  id               Int      @id @default(autoincrement())
  aspType          AspType
  actionDateTime   DateTime?
  affiliateLinkName String?
  referrerUrl      String?
  uid              String?
  createdAt        DateTime?
  updatedAt        DateTime?

  @@unique([aspType, actionDateTime, affiliateLinkName])
}

model AspClickLog {
  id               Int      @id @default(autoincrement())
  aspType          AspType
  clickDateTime    DateTime
  affiliateLinkName String
  referrerUrl      String?
  createdAt        DateTime?
  updatedAt        DateTime?

  @@unique([aspType, clickDateTime, affiliateLinkName])
}

model ClickLogSnapshot {
  id               Int      @id @default(autoincrement())
  aspType          AspType
  affiliateLinkName String
  currentTotalClicks Int      // ASPから取得した現在の総クリック数
  snapshotDate     DateTime
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@unique([aspType, affiliateLinkName, snapshotDate])
}

model TikTokRawReportAd {
  id                    Int      @id @default(autoincrement())
  advertiser_id         String
  ad_id                 String
  stat_time_day         String?
  budget                Int?
  spend                 Int?
  impressions           Int?
  clicks                Int?
  video_play_actions    Int?
  video_watched_2s      Int?
  video_watched_6s      Int?
  video_views_p100      Int?
  reach                 Int?
  conversion            Int?
  campaign_id           String
  campaign_name         String?
  adgroup_id            String
  adgroup_name          String?
  ad_name               String?
  ad_url                String?
  stat_time_day_dim     String?
  ad_id_dim             String?
  created_at            DateTime @default(now())
}

model TikTokRawReportAdgroup {
  id                   Int      @id @default(autoincrement()) 
  stat_time_day        String   
  advertiser_id        String   
  adgroup_id           String
  adgroup_name           String
  budget               Int
  spend                Int
  impressions          Int
  clicks               Int
  video_play_actions   Int
  video_watched_2s     Int
  video_watched_6s     Int
  video_views_p100     Int
  reach                Int
  conversion           Int
  created_at           DateTime @default(now())
  stat_time_day_dim     String?

}

model TikTokRawReportCampaign {
  id                   Int      @id @default(autoincrement()) 
  stat_time_day        String   
  advertiser_id        String   
  campaign_id          String
  campaign_name        String
  spend                Int
  impressions          Int
  clicks               Int
  video_play_actions   Int
  video_watched_2s     Int
  video_watched_6s     Int
  video_views_p100     Int
  reach                Int
  conversion           Int
  created_at           DateTime @default(now())
  stat_time_day_dim     String?

}


model TiktokFactReportAd {
  advertiser_id         String
  ad_id                 String
  adgroup_id            String
  campaign_id           String
  stat_time_day         String
  budget                Int?
  spend                 Int?
  impressions           Int?
  clicks                Int?
  video_play_actions    Int?
  video_watched_2s      Int?
  video_watched_6s      Int?
  video_views_p100      Int?
  reach                 Int?
  campaign_name         String?
  adgroup_name          String?
  ad_name               String?
  ad_url                String?
  created_at            DateTime @default(now())
  updated_at            DateTime @updatedAt

  campaign              TiktokDimensionCampaign @relation(fields: [campaign_id], references: [campaign_id])
  @@id([stat_time_day, ad_id])
}

model TiktokFactReportAdgroup {
  advertiser_id         String
  adgroup_id            String
  stat_time_day         String
  budget                Int?
  spend                 Int?
  impressions           Int?
  clicks                Int?
  video_play_actions    Int?
  video_watched_2s      Int?
  video_watched_6s      Int?
  video_views_p100      Int?
  reach                 Int?
  adgroup_name          String?
  created_at            DateTime @default(now())
  updated_at            DateTime @updatedAt

  @@id([stat_time_day, adgroup_id])
}

model TiktokFactReportCampaign {
  advertiser_id         String
  campaign_id            String
  stat_time_day         String
  spend                 Int?
  impressions           Int?
  clicks                Int?
  video_play_actions    Int?
  video_watched_2s      Int?
  video_watched_6s      Int?
  video_views_p100      Int?
  reach                 Int?
  campaign_name          String?
  created_at            DateTime @default(now())
  updated_at            DateTime @updatedAt

  @@id([stat_time_day, campaign_id])
}




model TiktokDimensionCampaign {
  campaign_id    String           @id
  advertiser_id  String
  campaign_name  String?
  adgroups       TiktokDimensionAdgroup[]

  reports        TiktokFactReportAd[]
}

model TiktokDimensionAdgroup {
  adgroup_id     String           @id
  adgroup_name   String
  advertiser_id  String
  campaign_id    String
  campaign        TiktokDimensionCampaign @relation(fields: [campaign_id], references: [campaign_id])
  ads            TiktokDimensionAd[]

}

model TiktokDimensionAd {
  ad_id          String           @id
  ad_name        String
  advertiser_id  String
  adgroup_id     String
  adgroup        TiktokDimensionAdgroup   @relation(fields: [adgroup_id], references: [adgroup_id])
}

