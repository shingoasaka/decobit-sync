generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model CatsActionLog {
  id                    Int      @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName     String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model CatsClickLog {
  id                    Int      @id @default(autoincrement())
  clickDateTime         DateTime?
  affiliateLinkName     String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model FinebirdActionLog {
  id                    Int      @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName     String?
  referrerUrl           String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model FinebirdClickLog {
  id                    Int      @id @default(autoincrement())
  affiliateLinkName     String?     
  clickData             Int?       
  createdAt             DateTime?
  updatedAt             DateTime?
}

model HanikamuActionLog {
  id                    Int       @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName     String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model HanikamuClickLog {
  id                    Int       @id @default(autoincrement())
  affiliateLinkName     String?
  clickData             Int?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model MetronActionLog {
  id Int @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName     String?
  referrerUrl           String?
  sessionId             String?
  uid                   String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model MetronClickLog {
  id                    Int       @id @default(autoincrement())
  clickDateTime         DateTime?
  affiliateLinkName     String?
  referrerUrl           String?
  sessionId             String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model MonkeyActionLog {
  id                　  Int       @id @default(autoincrement())
  actionDateTime        DateTime?
  affiliateLinkName　   String?
  referrerUrl       　  String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model MonkeyClickLog {
  id                   Int       @id @default(autoincrement())
  affiliateLinkName    String?
  clickData            Int?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model RentracksActionLog {
  id                   Int       @id @default(autoincrement())
  actionDateTime       DateTime?
  affiliateLinkName    String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model RentracksClickLog {
  id                   Int      @id @default(autoincrement())
  affiliateLinkName    String?
  clickData            Int?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model SampleAffiliateActionLog {
  id                   Int      @id @default(autoincrement())
  affiliateLinkName    String?
  actionDateTime       DateTime?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model SampleAffiliateClickLog {
  id                   Int      @id @default(autoincrement())
  affiliateLinkName    String?
  clickData            Int?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model ladActionLog {
  id                   Int       @id @default(autoincrement())
  actionDateTime       DateTime?
  affiliateLinkName    String?
  referrerUrl          String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model ladClickLog {
  id                   Int      @id @default(autoincrement())
  clickDateTime        DateTime?
  affiliateLinkName    String?
  referrerUrl          String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model WebantennaActionLog {
  id                   Int       @id @default(autoincrement())
  utmSourceIdentifier  String?
  creativeName         String?
  cvDate               DateTime?
  cvIdentifierId       String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

model TikTokReport {
  id                 Int      @id @default(autoincrement())
  advertiserId       String?
  adId               String?
  statTimeDay        String?
  budget             Int?
  spend              Int?
  impressions        Int?
  clicks             Int?
  videoPlayActions   Int?
  videoWatched2s     Int?
  videoWatched6s     Int?
  videoViewsP100     Int?
  reach              Int?
  conversion         Int?
  campaignId         String?
  campaignName       String?
  adgroupId          String?
  adgroupName        String?
  adName             String?
  adUrl              String?
  statTimeDayDimension String?
  adIdDimension      String?
  createdAt             DateTime?
  updatedAt             DateTime?
}

enum AspType {
  METRON
  CATS
  LAD
  MONKEY
  FINEBIRD
  HANIKAMU
  RENTRACKS
  SAMPLE_AFFILIATE
}

model AspActionLog {
  id               Int      @id @default(autoincrement())
  aspType          AspType
  actionDateTime   DateTime?
  affiliateLinkName String?
  referrerUrl      String?
  uid              String?
  createdAt        DateTime?
  updatedAt        DateTime?

  @@unique([aspType, actionDateTime, affiliateLinkName])
}

model AspClickLog {
  id               Int      @id @default(autoincrement())
  aspType          AspType
  clickDateTime    DateTime
  affiliateLinkName String
  referrerUrl      String?
  createdAt        DateTime?
  updatedAt        DateTime?

  @@unique([aspType, clickDateTime, affiliateLinkName])
}

model ClickLogSnapshot {
  id               Int      @id @default(autoincrement())
  aspType          AspType
  affiliateLinkName String
  currentTotalClicks Int      // ASPから取得した現在の総クリック数
  snapshotDate     DateTime
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@unique([aspType, affiliateLinkName, snapshotDate])
}
